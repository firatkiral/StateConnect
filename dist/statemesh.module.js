var t={d:(e,i)=>{for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};t.d(e,{K:()=>c,Z:()=>o});var i,s,r,n,h=function(t,e,i,s,r){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?r.call(t,i):r?r.value=i:e.set(t,i),i},a=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)};class o{constructor(t){this.valid=!0,this.subscribers=[],i.set(this,""),this.hook=()=>this.invalidate(),this.cache=t}setName(t){return h(this,i,t,"f"),this}getName(){return a(this,i,"f")}addSubscriber(t,e){return-1===this.subscribers.indexOf(t)&&(this.subscribers.push(t),t(this.get())),{listener:t,destroy:()=>{this.removeSubscriber(t)}}}removeSubscriber(t){let e=this.subscribers.indexOf(t);return-1!==e&&this.subscribers.splice(e,1),this}clearSubscribers(){for(let t in this.subscribers)this.removeSubscriber(this.subscribers[0]);return this}validate(){this.valid||(this.valid=!0,this.onValidate())}invalidate(){if(this.valid){this.valid=!1,this.onInvalidate();for(let t of this.subscribers)t(this.get())}}onInvalidate(){}onValidate(){}connect(t){return t.setConnection(this),this}setConnection(t){var e;return null===(e=this.incoming)||void 0===e||e.removeSubscriber(this.hook),this.incoming=void 0,t&&(this.incoming=t,t.addSubscriber(this.hook)),this.invalidate(),this}isConnected(){return!!this.incoming}getIncoming(){return this.incoming}set(t){return this.cache=t,this.invalidate(),this}get(){return this.valid||(this.cache=this.incoming?this.incoming.get():this.cache,this.validate()),this.cache}}i=new WeakMap;class c extends o{constructor(){super(...arguments),s.set(this,[]),r.set(this,((...t)=>this.incoming?this.incoming.get():this.cache)),n.set(this,a(this,r,"f"))}addInput(...t){return t.forEach((t=>{t.addSubscriber(this.hook),a(this,s,"f").push(t)})),this.invalidate(),this}removeInput(...t){return t.forEach((t=>{let e=a(this,s,"f").indexOf(t);e>-1&&this.removeInputAt(e)})),this}removeInputAt(t){return a(this,s,"f")[t].removeSubscriber(this.hook),a(this,s,"f").splice(t,1),this.invalidate(),this}clearInputs(){for(let t in a(this,s,"f"))this.removeInputAt(0);return this}getInputs(){return a(this,s,"f")}set(t){return this}get(){return this.valid||(this.cache=this.compute(...a(this,s,"f").map((t=>t.get()))),this.validate()),this.cache}compute(...t){return a(this,n,"f").call(this,...t)}setComputeFn(t){return h(this,n,t||a(this,r,"f"),"f"),this.invalidate(),this}}s=new WeakMap,r=new WeakMap,n=new WeakMap;var u=e.K,d=e.Z;export{u as Binding,d as State};